(function(t){function e(e){for(var a,i,n=e[0],c=e[1],l=e[2],d=0,m=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,n=1;n<r.length;n++){var c=r[n];0!==o[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},o={app:0},s=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/moire-deploy/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"42f0":function(t,e,r){},"4ea5":function(t,e,r){t.exports=r.p+"img/loader.054bff0b.gif"},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header",{staticClass:"header container"},[r("div",{staticClass:"header__wrapper"},[r("router-link",{staticClass:"header__info",attrs:{to:{name:"main"}}},[t._v("Каталог")]),r("router-link",{staticClass:"header__logo",attrs:{to:{name:"main"}}},[r("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})]),r("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),r("CartIndicator")],1)]),r("router-view"),r("footer",{staticClass:"footer container"},[r("div",{staticClass:"footer__wrapper"},[r("ul",{staticClass:"footer__links"},[r("li",[r("router-link",{staticClass:"footer__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0),t._m(1),t._m(2),t._m(3)]),r("ul",{staticClass:"footer__social social"},[r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[r("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[r("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[r("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[r("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),r("li",{staticClass:"social__item"},[r("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[r("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),r("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(4),r("span",{staticClass:"footer__copyright"},[t._v(" © 2022 Moire ")])])])],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@moire.com"}},[t._v(" hi@moire.com ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"footer__data"},[r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),r("li",[r("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],i=r("5530"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[t.cartLoading?a("div",[a("img",{attrs:{src:r("4ea5"),width:"30"}})]):t.cartLoadingError?a("div",[a("img",{attrs:{src:r("704c"),width:"30"}})]):a("div",[a("svg",{attrs:{width:"19",height:"24"}},[a("use",{attrs:{"xlink:href":"#icon-cart"}})]),a("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.amount))])])])},c=[],l=r("2f62"),u={name:"CartIndicator",computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("cart",{cartLoading:"getCartLoading",cartLoadingError:"getCartLoadingError",cartProducts:"getCartProducts",cartItemsProducts:"getCartItemsProducts"})),{},{amount:function(){return this.cartItemsProducts?this.cartItemsProducts:0}})},d=u,m=r("2877"),p=Object(m["a"])(d,n,c,!1,null,null,null),_=p.exports,f={components:{CartIndicator:_},created:function(){var t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("cart",["loadCart"])),Object(l["d"])("cart",["updateUserAccessKey"]))},g=f,h=Object(m["a"])(g,o,s,!1,null,null,null),v=h.exports,C=r("8c4f"),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top content__top--catalog"},[r("h1",{staticClass:"content__title"},[t._v(" Каталог ")]),r("span",{staticClass:"content__info"},[t._v(" "+t._s(t.countProductsString)+" ")])]),r("div",{staticClass:"content__catalog"},[r("ProductFilter",{attrs:{priceFrom:t.filterPriceFrom,priceTo:t.filterPriceTo,categoryId:t.filterCategory,seasons:t.filterSeasons,materials:t.filterMaterials},on:{updateFilter:t.updateFilter}}),r("section",{staticClass:"catalog"},[t.productsLoading?r("div",[t._v(" Загрузка товаров ")]):t._e(),t.productsLoadingFailed?r("div",[r("LoaderErrorInfo",{attrs:{title:"Ошибка при загрузке товаров..."},on:{reload:t.reload}})],1):t._e(),t.productsLoading?t._e():r("ProductList",{attrs:{products:t.products}}),r("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])])},P=[],y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return r("ProductItem",{key:t.id,attrs:{product:t}})})),1)},k=[],I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"catalog__item"},[r("router-link",{staticClass:"catalog__pic",attrs:{href:"#",to:{name:"product",params:{id:t.product.id}}}},[r("img",{attrs:{src:t.image,alt:t.product.title}})]),r("h3",{staticClass:"catalog__title"},[r("router-link",{attrs:{to:{name:"product",params:{id:t.product.id}}}},[t._v(" "+t._s(t.product.title)+" ")])],1),r("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ₽ ")]),r("ColorPicker",{staticClass:"colors colors--black",attrs:{colors:t.product.colors,currentColor:t.currentColor,productId:t.product.id},on:{"update:currentColor":function(e){t.currentColor=e},"update:current-color":function(e){t.currentColor=e}}})],1)},D=[],F=(r("c740"),new a["a"]);function O(t,e){F.$emit("gotoPage",t,e)}function L(t){return new Intl.NumberFormat("ru-RU").format(t)}var j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",t._l(t.colors,(function(e){return r("li",{key:e.id,staticClass:"colors__item"},[r("label",{staticClass:"colors__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.pickerColor,expression:"pickerColor"}],staticClass:"colors__radio sr-only",attrs:{type:"radio"},domProps:{value:e.id,checked:t._q(t.pickerColor,e.id)},on:{change:function(r){t.pickerColor=e.id}}}),r("span",{staticClass:"colors__value",style:{"background-color":e.color.code,border:"1px solid lightgrey"},attrs:{title:e.title}})])])})),0)},x=[],A={name:"ColorPicker",props:["colors","currentColor"],computed:{pickerColor:{get:function(){return this.currentColor},set:function(t){this.$emit("update:currentColor",t)}}}},T=A,S=Object(m["a"])(T,j,x,!1,null,null,null),w=S.exports,E={data:function(){return{currentColor:""}},filters:{numberFormat:L},computed:{image:function(){var t=this,e=this.product.colors.findIndex((function(e){return e.id===t.currentColor}));return this.product.colors[e].gallery?this.product.colors[e].gallery[0].file.url:"./img/not_image.png"}},methods:{gotoPage:O},created:function(){this.currentColor=this.product.colors[0].id},props:["product"],components:{ColorPicker:w}},$=E,M=Object(m["a"])($,I,D,!1,null,null,null),K=M.exports,B={props:["products"],components:{ProductItem:K}},V=B,N=Object(m["a"])(V,y,k,!1,null,null,null),q=N.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__pagination pagination"},[r("li",{staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{"aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page-1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(e){return r("li",{key:e,staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.paginate(e)}}},[t._v(" "+t._s(e)+" ")])])})),r("li",{staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.pages},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page+1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},z=[],R={model:{prop:"page",event:"paginate"},props:["page","count","perPage"],computed:{pages:function(){return Math.ceil(this.count/this.perPage)}},methods:{paginate:function(t){this.$emit("paginate",t)}}},J=R,G=Object(m["a"])(J,U,z,!1,null,null,null),H=G.exports,Q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",{staticClass:"filter"},[r("h2",{staticClass:"filter__title"},[t._v("Фильтры")]),r("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Цена")]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price",placeholder:"0"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("От")])]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price",placeholder:"0"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("До")])])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Категория")]),r("label",{staticClass:"form__label form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.currentCategory,expression:"currentCategory"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentCategory=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Материал")]),r("ul",{staticClass:"check-list"},t._l(t.materials,(function(e){return r("li",{key:e.id,staticClass:"check-list__item"},[r("label",{staticClass:"check-list__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentMaterials,expression:"currentMaterials",modifiers:{number:!0}}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.currentMaterials)?t._i(t.currentMaterials,e.id)>-1:t.currentMaterials},on:{change:function(r){var a=t.currentMaterials,o=r.target,s=!!o.checked;if(Array.isArray(a)){var i=t._n(e.id),n=t._i(a,i);o.checked?n<0&&(t.currentMaterials=a.concat([i])):n>-1&&(t.currentMaterials=a.slice(0,n).concat(a.slice(n+1)))}else t.currentMaterials=s}}}),r("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),r("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),r("ul",{staticClass:"check-list"},t._l(t.seasons,(function(e){return r("li",{key:e.id,staticClass:"check-list__item"},[r("label",{staticClass:"check-list__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentSeasons,expression:"currentSeasons",modifiers:{number:!0}}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.currentSeasons)?t._i(t.currentSeasons,e.id)>-1:t.currentSeasons},on:{change:function(r){var a=t.currentSeasons,o=r.target,s=!!o.checked;if(Array.isArray(a)){var i=t._n(e.id),n=t._i(a,i);o.checked?n<0&&(t.currentSeasons=a.concat([i])):n>-1&&(t.currentSeasons=a.slice(0,n).concat(a.slice(n+1)))}else t.currentSeasons=s}}}),r("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),r("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]),r("BaseSubmit",{staticClass:"filter__submit button button--primery",attrs:{title:"Применить",loader:t.loading}}),r("button",{staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:t.reset}},[t._v(" Сбросить ")])],1)])},W=[],X=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loader?r("button",{staticClass:"loader-img",attrs:{type:"submit"}},[t._v(" "+t._s(t.title)+" ")]):r("button",{attrs:{type:"submit"}},[t._v(" "+t._s(t.title)+" ")])},Y=[],Z={name:"BaseSubmit",props:["title","loader"]},tt=Z,et=(r("f162"),Object(m["a"])(tt,X,Y,!1,null,"c1e75ac6",null)),rt=et.exports,at={name:"ProductFilter",components:{BaseSubmit:rt},data:function(){return{currentPriceFrom:"",currentPriceTo:"",currentCategory:0,currentSeasons:[],currentMaterials:[]}},props:["priceFrom","priceTo","categoryId"],computed:Object(i["a"])({},Object(l["c"])("catalog",{categories:"getProductCategories",seasons:"getSeasons",materials:"getMaterials",loading:"getProductsLoading"})),watch:{priceFrom:function(t){this.currentPriceFrom=t},priceTo:function(t){this.currentPriceTo=t},categoryId:function(t){this.currentCategory=t}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("catalog",["loadProductCategories","loadSeasons","loadMaterials"])),{},{submit:function(){this.$emit("updateFilter",{priceFrom:this.currentPriceFrom,priceTo:this.currentPriceTo,categoryId:this.currentCategory,seasons:this.currentSeasons,materials:this.currentMaterials})},reset:function(){this.$emit("updateFilter",{priceFrom:"",priceTo:"",categoryId:0,seasons:[],materials:[]}),this.currentSeasons=[],this.currentMaterials=[]}}),created:function(){this.loadProductCategories(),this.loadMaterials(),this.loadSeasons()}},ot=at,st=Object(m["a"])(ot,Q,W,!1,null,null,null),it=st.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(t._s(t.title)+" "),r("p",[r("a",{staticClass:"errLink",on:{click:function(e){return e.preventDefault(),t.reloadAgain.apply(null,arguments)}}},[t._v("Попробовать ещё раз")])]),t._m(0)])},ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-img"},[a("img",{attrs:{src:r("e9e7")}})])}],lt={name:"LoaderErrorInfo",props:["title"],methods:{reloadAgain:function(){this.$emit("reload")}}},ut=lt,dt=(r("8aa4"),Object(m["a"])(ut,nt,ct,!1,null,"e14609c2",null)),mt=dt.exports;function pt(t,e){var r=[2,0,1,1,1,2],a=r[e%10<5?e%10:5];return t[e%100>4&&e%100<20?2:a]}var _t={components:{ProductFilter:it,ProductList:q,BasePagination:H,LoaderErrorInfo:mt},computed:Object(i["a"])(Object(i["a"])({page:{get:function(){return this.$store.state.catalog.page},set:function(t){this.$store.commit("catalog/setPage",t)}},filterPriceFrom:{get:function(){return this.$store.getters["catalog/getFilterPriceFrom"]},set:function(t){this.$store.commit("catalog/setFilterPriceFrom",t)}},filterPriceTo:{get:function(){return this.$store.getters["catalog/getFilterPriceTo"]},set:function(t){this.$store.commit("catalog/setFilterPriceTo",t)}},filterCategory:{get:function(){return this.$store.getters["catalog/getFilterCategory"]},set:function(t){this.$store.commit("catalog/setFilterCategory",t)}},filterSeasons:{get:function(){return this.$store.getters["catalog/getFilterSeasons"]},set:function(t){this.$store.commit("catalog/setFilterSeasons",t)}},filterMaterials:{get:function(){return this.$store.getters["catalog/getFilterMaterials"]},set:function(t){this.$store.commit("catalog/setFilterMaterials",t)}}},Object(l["c"])("catalog",{productsData:"getProductsData",productsLoading:"getProductsLoading",productsLoadingFailed:"getProductsLoadingFailed",currentPage:"getPage",productsPerPage:"getProductsPerPage",countProducts:"getCountProducts"})),{},{countProductsString:function(){return this.countProducts+" "+pt(["товар","товара","товаров"],this.countProducts)},products:function(){return this.productsData?this.productsData.items:[]}}),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("catalog",["loadProducts"])),{},{reload:function(){this.loadProducts()},updateFilter:function(t){this.filterPriceFrom=t.priceFrom,this.filterPriceTo=t.priceTo,this.filterCategory=t.categoryId,this.filterSeasons=t.seasons,this.filterMaterials=t.materials,this.loadProducts()}}),watch:{countProducts:function(){this.page=1},page:function(){this.loadProducts()}},created:function(){this.loadProducts()}},ft=_t,gt=Object(m["a"])(ft,b,P,!1,null,null,null),ht=gt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.productLoading?r("main",{staticClass:"content container"},[r("LoaderInfo",{attrs:{title:"Загрузка товара"}})],1):t.productData?r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" "+t._s(t.category.title)+" ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),r("section",{staticClass:"item"},[r("div",{staticClass:"item__pics pics"},[r("div",{staticClass:"pics__wrapper"},[r("img",{attrs:{width:"570",height:"570",src:t.currentImage,alt:t.product.title}})]),r("ul",{staticClass:"pics__list"},t._l(t.images,(function(e){return r("li",{key:e,staticClass:"pics__item"},[r("a",{staticClass:"pics__link pics__link--current",attrs:{href:""}},[r("img",{attrs:{width:"98",height:"98",src:e,alt:t.product.title}})])])})),0)]),r("div",{staticClass:"item__info"},[r("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),r("h2",{staticClass:"item__title"},[t._v(" "+t._s(t.product.title)+" ")]),r("div",{staticClass:"item__form"},[r("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[r("div",{staticClass:"item__row item__row--center"},[r("BaseCounter",{attrs:{amount:t.productAmount},on:{"update:amount":function(e){t.productAmount=e}}}),r("b",{staticClass:"item__price"},[t._v(" "+t._s(t.product.price)+" ₽ ")])],1),r("div",{staticClass:"item__row"},[r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Цвет")]),r("ColorPicker",{staticClass:"colors colors--black",attrs:{colors:t.colors,currentColor:t.currentColor},on:{"update:currentColor":function(e){t.currentColor=e},"update:current-color":function(e){t.currentColor=e}}})],1),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v("Размер")]),r("label",{staticClass:"form__label form__label--small form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.sizeId,expression:"sizeId"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sizeId=e.target.multiple?r:r[0]}}},t._l(t.product.sizes,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title)+" ")])})),0)])])]),r("BaseSubmit",{staticClass:"item__button button button--primery",attrs:{title:"В корзину",loader:t.productAddSending}}),t.productAdded&&!t.productAddSendingError?r("div",{staticClass:"message-info"},[t._v(" Товар добавлен в корзину. ")]):t._e(),!t.productAdded&&t.productAddSendingError?r("div",{staticClass:"message-error"},[t._v(" Что-то пошло не так. Попробуйте, повторить. ")]):t._e()],1)])]),t._m(0)])]):r("main",{staticClass:"content container"},[r("LoaderErrorInfo",{attrs:{title:"Не удалось получить товар"},on:{reload:t.reload}})],1)},Ct=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item__desc"},[r("ul",{staticClass:"tabs"},[r("li",{staticClass:"tabs__item"},[r("a",{staticClass:"tabs__link tabs__link--current"},[t._v(" Информация о товаре ")])]),r("li",{staticClass:"tabs__item"},[r("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Доставка и возврат ")])])]),r("div",{staticClass:"item__content"},[r("h3",[t._v("Состав:")]),r("p",[t._v(" 60% хлопок"),r("br"),t._v(" 30% полиэстер"),r("br")]),r("h3",[t._v("Уход:")]),r("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),r("br"),t._v(" Гладить при макс. 110ºC"),r("br"),t._v(" Не использовать машинную сушку"),r("br"),t._v(" Отбеливать запрещено"),r("br"),t._v(" Не подвергать химчистке"),r("br")])])])}],bt=(r("7db0"),r("d3b7"),r("159b"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"b-popup"},[r("div",{staticClass:"b-popup-content"},[r("div",{staticClass:"holder"},[t._v(t._s(t.title)+" "),t._m(0)])])])}),Pt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preloader"},[r("div"),r("div"),r("div"),r("div"),r("div"),r("div"),r("div"),r("div"),r("div"),r("div")])}],yt={name:"LoaderInfo",props:["title"]},kt=yt,It=Object(m["a"])(kt,bt,Pt,!1,null,null,null),Dt=It.exports,Ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form__counter"},[r("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){t.amountCurrent--}}},[r("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-minus"}})])]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amountCurrent,expression:"amountCurrent",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.amountCurrent},on:{input:function(e){e.target.composing||(t.amountCurrent=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){t.amountCurrent++}}},[r("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-plus"}})])])])},Ot=[],Lt={name:"BaseCounter",props:["amount"],computed:{amountCurrent:{get:function(){return this.amount},set:function(t){t>0&&this.$emit("update:amount",t)}}}},jt=Lt,xt=Object(m["a"])(jt,Ft,Ot,!1,null,null,null),At=xt.exports,Tt={data:function(){return{productAmount:1,currentColor:"",sizeId:"",productAdded:!1,productAddSending:!1,productAddSendingError:!1}},components:{BaseSubmit:rt,BaseCounter:At,LoaderErrorInfo:mt,LoaderInfo:Dt,ColorPicker:w},filters:{numberFormat:L},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("product",{productData:"getProductData",productLoading:"getProductLoading"})),{},{colors:function(){return this.productData?this.productData.colors:[]},product:function(){return this.productData},category:function(){return this.productData.category},currentColorId:function(){var t=this;return this.productData?this.productData.colors.find((function(e){return e.id===t.currentColor})):null},currentImage:function(){var t=this.currentColorId;return t?t.gallery?t.gallery[0].file.url:"./img/not_image.png":null},images:function(){var t=[],e=this.currentColorId;return e&&e.gallery&&e.gallery.forEach((function(e){t.push(e.file.url)})),t}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["b"])("cart",["addProductToCart"])),Object(l["b"])("product",["loadProduct"])),{},{gotoPage:O,addToCart:function(){var t=this;this.productAdded=!1,this.productAddSending=!0,this.productAddSendingError=!1,this.addProductToCart({productId:this.product.id,colorId:this.currentColorId.color.id,sizeId:this.sizeId,quantity:this.productAmount}).then((function(){t.productAdded=!0,t.productAddSending=!1})).catch((function(e){console.log(e),t.productAdded=!1,t.productAddSending=!1,t.productAddSendingError=!0}))},reload:function(){this.loadProduct(this.$route.params.id)}}),watch:{productData:function(){this.productData&&(this.currentColor=this.productData.colors[0].id,this.sizeId=this.productData.sizes[0].id)},"$route.params.id":{handler:function(){this.reload()},immediate:!0}}},St=Tt,wt=(r("8c07"),Object(m["a"])(St,vt,Ct,!1,null,"55dfc205",null)),Et=wt.exports,$t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.cartLoading?r("main",{staticClass:"content container"},[r("LoaderInfo",{attrs:{title:"Загрузка корзины"}})],1):t.cartLoadingError?r("main",{staticClass:"content container"},[r("LoaderErrorInfo",{attrs:{title:"Ошибка при загрузке корзины..."},on:{reload:t.reload}})],1):r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0)]),r("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),r("span",{staticClass:"content__info"},[t._v(" "+t._s(t.cartCount)+" ")])]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[r("div",{staticClass:"cart__field"},[r("ul",{staticClass:"cart__list"},t._l(t.products,(function(t){return r("CartItem",{key:t.productId,attrs:{item:t}})})),1)]),r("div",{staticClass:"cart__block"},[r("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),r("p",{staticClass:"cart__price"},[t._v(" Итого: "),r("span",[t._v(t._s(t._f("numberFormat")(t.totalPrice))+" ₽")])]),r("router-link",{staticClass:"cart__button button button--primery",attrs:{tag:"button",type:"submit",to:{name:"order"}}},[t._v(" Оформить заказ ")])],1)])])])},Mt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])}],Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"cart__item product"},[r("div",{staticClass:"product__pic"},[r("img",{attrs:{src:t.item.product.color.gallery[0].file.url,width:"120",height:"120",alt:t.item.product.product.title}})]),r("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.item.product.product.title)+" ")]),r("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),r("span",[r("i",{style:{"background-color":t.item.product.color.color.code}}),t._v(" "+t._s(t.item.product.color.color.title)+" ")])]),r("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.item.productId)+" Размер: "+t._s(t.item.product.size.title)+" ")]),r("BaseCounter",{staticClass:"product__counter form__counter",attrs:{amount:t.amount},on:{"update:amount":function(e){t.amount=e}}}),r("b",{staticClass:"product__price"},[t._v(" "+t._s(t._f("numberFormat")(t.item.amount*t.item.product.price))+" ₽ ")]),r("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return t.deleteProduct(t.item.basketItemId)}}},[r("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-close"}})])])],1)},Bt=[],Vt={name:"CartItem",props:["item"],components:{BaseCounter:At},filters:{numberFormat:L},computed:{amount:{get:function(){return this.item.amount},set:function(t){this.updateAmount({basketItemId:this.item.basketItemId,amount:t})}}},methods:Object(i["a"])({},Object(l["b"])("cart",{deleteProduct:"removeCartProduct",updateAmount:"updateCartProductAmount"}))},Nt=Vt,qt=Object(m["a"])(Nt,Kt,Bt,!1,null,null,null),Ut=qt.exports,zt={filters:{numberFormat:L},components:{CartItem:Ut,LoaderInfo:Dt,LoaderErrorInfo:mt},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("cart",{products:"cartDetailProducts",totalPrice:"cartTotalPrice",cartPositionsCount:"cartPositionsCount",cartLoading:"getCartLoading",cartLoadingError:"getCartLoadingError"})),{},{cartCount:function(){return this.cartPositionsCount+" "+pt(["товар","товара","товаров"],this.cartPositionsCount)}}),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["loadCart"])),{},{reload:function(){this.loadCart()}})},Rt=zt,Jt=Object(m["a"])(Rt,$t,Mt,!1,null,null,null),Gt=Jt.exports,Ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",[t._v("Страница не найдена!")])},Qt=[],Wt={},Xt=Object(m["a"])(Wt,Ht,Qt,!1,null,null,null),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),t._m(1)]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.order.apply(null,arguments)}}},[r("div",{staticClass:"cart__field"},[r("div",{staticClass:"cart__data"},[r("BaseFormText",{attrs:{error:t.formError.name,title:"ФИО",placeholder:"Иванов Иван Иванович"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),r("BaseFormText",{attrs:{error:t.formError.address,title:"Адрес доставки",placeholder:"г. Москва, Ленинский проспект, дом 6, строение 20"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}}),r("BaseFormText",{attrs:{error:t.formError.phone,title:"Телефон",type:"tel",placeholder:"+79876543210"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),r("BaseFormText",{attrs:{error:t.formError.email,title:"Email",type:"email",placeholder:"user@mail.ru"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),r("BaseFormTextarea",{attrs:{error:t.formError.comment,title:"Комментарий к заказу",placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(e){t.$set(t.formData,"comment",e)},expression:"formData.comment"}})],1),r("div",{staticClass:"cart__options"},[r("h3",{staticClass:"cart__title"},[t._v("Доставка")]),r("ul",{staticClass:"cart__options options"},t._l(t.deliveries,(function(e){return r("li",{key:e.id,staticClass:"options__item"},[r("label",{staticClass:"options__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.deliveryTypeId,expression:"formData.deliveryTypeId",modifiers:{number:!0}}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery"},domProps:{value:e.id,checked:t._q(t.formData.deliveryTypeId,t._n(e.id))},on:{change:function(r){t.$set(t.formData,"deliveryTypeId",t._n(e.id))}}}),r("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" "),r("b",[t._v(t._s(t.deliveryPriceFormatted(e.id)))])])])])})),0),r("h3",{staticClass:"cart__title"},[t._v("Оплата")]),r("ul",{staticClass:"cart__options options"},t._l(t.currentPayments,(function(e){return r("li",{key:e.id,staticClass:"options__item"},[r("label",{staticClass:"options__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.paymentTypeId,expression:"formData.paymentTypeId"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay"},domProps:{value:e.id,checked:t._q(t.formData.paymentTypeId,e.id)},on:{change:function(r){return t.$set(t.formData,"paymentTypeId",e.id)}}}),r("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" ")])])])})),0)])]),r("div",{staticClass:"cart__block"},[r("ul",{staticClass:"cart__orders"},t._l(t.cartDetailProducts,(function(t){return r("CartProductInfo",{key:t.productId,attrs:{cartItem:t}})})),1),r("div",{staticClass:"cart__total"},[r("p",[t._v("Доставка: "),r("b",[t._v(t._s(t.totalDeliveryPrice))])]),r("p",[t._v("Итого: "),r("b",[t._v(t._s(t.getCartItemsProducts))]),t._v(" "+t._s(t.infoString)+" на сумму "),r("b",[t._v(t._s(t._f("numberFormat")(t.totalCartPrice))+" ₽")])])]),r("BaseSubmit",{staticClass:"cart__button button button--primery",attrs:{title:"Оформить заказ",loader:t.loading}})],1),t.formErrorMessage?r("div",{staticClass:"cart__error form__error-block"},[r("h4",[t._v("Заявка не отправлена!")]),r("p",[t._v(" "+t._s(t.formErrorMessage)+" ")])]):t._e()])])])},te=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content__row"},[r("h1",{staticClass:"content__title"},[t._v(" Оформление заказа ")])])}],ee=r("1da1"),re=(r("96cf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseFormField",{attrs:{title:t.title,error:t.error}},["checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{name:"name",placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.dataValue)?t._i(t.dataValue,null)>-1:t.dataValue},on:{change:function(e){var r=t.dataValue,a=e.target,o=!!a.checked;if(Array.isArray(r)){var s=null,i=t._i(r,s);a.checked?i<0&&(t.dataValue=r.concat([s])):i>-1&&(t.dataValue=r.slice(0,i).concat(r.slice(i+1)))}else t.dataValue=o}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{name:"name",placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.dataValue,null)},on:{change:function(e){t.dataValue=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{name:"name",placeholder:t.placeholder,type:t.type},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])}),ae=[],oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form__label"},[t._t("default"),r("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?r("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)},se=[],ie={props:["title","error"]},ne=ie,ce=Object(m["a"])(ne,oe,se,!1,null,null,null),le=ce.exports,ue={props:["title","error","placeholder","value"],components:{BaseFormField:le},computed:{dataValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},de={props:{type:{default:"text"}},mixins:[ue]},me=de,pe=Object(m["a"])(me,re,ae,!1,null,null,null),_e=pe.exports,fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseFormField",{attrs:{title:t.title,error:t.error}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{name:"name",placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])},ge=[],he={mixins:[ue]},ve=he,Ce=Object(m["a"])(ve,fe,ge,!1,null,null,null),be=Ce.exports,Pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"cart__order"},[r("h3",[t._v(t._s(t.cartItem.product.product.title))]),r("b",[t._v(t._s(t._f("numberFormat")(t.cartItem.positionCost))+" ₽")]),r("span",[t._v("Артикул: "+t._s(t.cartItem.productId))])])},ye=[],ke={name:"CartProductInfo",props:["cartItem"],filters:{numberFormat:L}},Ie=ke,De=Object(m["a"])(Ie,Pe,ye,!1,null,null,null),Fe=De.exports,Oe=r("bc3a"),Le=r.n(Oe),je="https://vue-moire.skillbox.cc",xe={components:{BaseSubmit:rt,BaseFormText:_e,BaseFormTextarea:be,CartProductInfo:Fe},data:function(){return{formData:{deliveryTypeId:null,paymentTypeId:null},formError:{},formErrorMessage:"",loading:!1}},filters:{numberFormat:L},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["c"])("cart",["cartDetailProducts","cartTotalPrice","getUserAccessKey","getCartItemsProducts"])),Object(l["c"])("order",["getDeliveryData","getPayments"])),{},{infoString:function(){return pt(["товар","товара","товаров"],this.getCartItemsProducts)},deliveries:function(){return this.getDeliveryData||[]},currentPayments:function(){var t=this,e=this.getPayments;if(!e)return[];var r=e.find((function(e){return e.deliveryTypeId===t.formData.deliveryTypeId}));return r?r.items:[]},totalDeliveryPrice:function(){var t=this.deliveryPrice(this.formData.deliveryTypeId);return"0"===t?"бесплатно":t+" ₽"},totalCartPrice:function(){var t=this.deliveryPrice(this.formData.deliveryTypeId);return parseFloat(this.cartTotalPrice)+parseFloat(t)}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["b"])("order",["loadDeliveryData","loadPayments"])),Object(l["d"])("cart",["resetCart"])),Object(l["d"])("order",["updateOrderInfo"])),{},{deliveryPrice:function(t){var e=this.deliveries.find((function(e){return e.id===t}));if(e)return e.price},deliveryPriceFormatted:function(t){var e=this.deliveryPrice(t);return"0"===e?"бесплатно":e+" ₽"},order:function(){var t=this;this.loading=!0,this.formError={},this.formErrorMessage="",Le.a.post(je+"/api/orders",Object(i["a"])({},this.formData),{params:{userAccessKey:this.getUserAccessKey}}).then((function(e){t.resetCart(),t.formData={},t.formData.deliveryTypeId=0,t.formData.paymentTypeId=0,t.updateOrderInfo(e.data),t.$router.push({name:"orderInfo",params:{id:e.data.id}})})).catch((function(e){t.formErrorMessage=e.response.data.error.message,t.formError=e.response.data.error.request||{}})).then((function(){return t.loading=!1}))}}),watch:{currentPayments:function(){!this.formData.paymentTypeId&&this.currentPayments&&(this.formData.paymentTypeId=this.currentPayments[0].id)},"formData.deliveryTypeId":{deep:!0,handler:function(t){t&&this.currentPayments[0]?this.formData.paymentTypeId=this.currentPayments[0].id:this.formData.paymentTypeId=null}}},created:function(){var t=this;return Object(ee["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadDeliveryData();case 2:return e.next=4,t.loadPayments();case 4:t.formData.deliveryTypeId=t.deliveries[0].id;case 5:case"end":return e.stop()}}),e)})))()}},Ae=xe,Te=Object(m["a"])(Ae,Zt,te,!1,null,null,null),Se=Te.exports,we=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("main",{staticClass:"content container"},[r("LoaderInfo",{attrs:{title:"Получение информации"}})],1):r("main",{staticClass:"content container"},[r("div",{staticClass:"content__top"},[r("ul",{staticClass:"breadcrumbs"},[r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),r("li",{staticClass:"breadcrumbs__item"},[r("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),t.orderInfo?r("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),r("span",[t._v("№ "+t._s(t.orderInfo.id))])]):t._e()]),r("section",{staticClass:"cart"},[r("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[r("div",{staticClass:"cart__field"},[r("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),t.orderInfo?r("ul",{staticClass:"dictionary"},[r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.name)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.address)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.phone)+" ")])]),r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),r("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.email)+" ")])]),t._m(1)]):t._e()]),r("div",{staticClass:"cart__block"},[t.orderPositionsCount?r("ul",{staticClass:"cart__orders"},t._l(t.orderProducts,(function(t){return r("CartProductInfo",{key:t.id,attrs:{cartItem:t}})})),1):t._e(),t.orderPositionsCount?r("div",{staticClass:"cart__total"},[r("p",[t._v("Доставка: "),r("b",[t._v(t._s(t.orderDeliveryPrice)+" ₽")])]),r("p",[t._v("Итого: "),r("b",[t._v(t._s(t.orderPositionsCount))]),t._v(" "+t._s(t.infoString)+" на сумму "),r("b",[t._v(t._s(t._f("numberFormat")(t.orderTotalPrice))+" ₽")])])]):t._e()])])])])},Ee=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"breadcrumbs__item"},[r("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"dictionary__item"},[r("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),r("span",{staticClass:"dictionary__value"},[t._v(" картой при получении ")])])}],$e=(r("ac1f"),r("5319"),{data:function(){return{loading:!1}},components:{CartProductInfo:Fe,LoaderInfo:Dt},filters:{numberFormat:L},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["c"])("order",{orderInfo:"getOrderInfo",orderProducts:"orderProducts"})),Object(l["c"])("cart",["getUserAccessKey"])),{},{orderPositionsCount:function(){return this.orderProducts?this.orderProducts.reduce((function(t,e){return t+e.product.quantity}),0):0},infoString:function(){return pt(["товар","товара","товаров"],this.orderPositionsCount)},orderTotalPrice:function(){return this.orderInfo.totalPrice},orderDeliveryPrice:function(){return this.orderInfo.deliveryType.price}}),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("order",["loadOrderInfo"])),{},{loadOrderDetails:function(){var t=this,e=this.orderInfo;e&&e.id===this.$route.params.id||(this.loading=!0,this.loadOrderInfo({orderId:this.$route.params.id,userAccessKey:this.getUserAccessKey}).catch((function(e){console.log(e),t.$router.replace({name:"notFound",params:{0:"/"}})})).then((function(){return t.loading=!1})))}}),watch:{"$route.params.id":{handler:function(){this.loadOrderDetails()},immediate:!0}}}),Me=$e,Ke=Object(m["a"])(Me,we,Ee,!1,null,null,null),Be=Ke.exports;a["a"].use(C["a"]);var Ve=[{name:"main",component:ht,path:"/"},{name:"product",component:Et,path:"/product/:id"},{name:"cart",component:Gt,path:"/cart/"},{name:"order",component:Se,path:"/order/"},{name:"orderInfo",component:Be,path:"/order/:id"},{name:"notFound",component:Yt,path:"*"}],Ne=new C["a"]({routes:Ve}),qe=Ne,Ue={items:[],productsLoading:!1,productsLoadingFailed:!1,filterPriceFrom:0,filterPriceTo:0,filterCategory:0,filterColors:[],filterMaterials:[],filterSeasons:[],page:1,productsPerPage:12,productsData:null,colors:null,seasons:null,productCategories:null,materials:null},ze={getProductsLoading:function(t){return t.productsLoading},getProductsLoadingFailed:function(t){return t.productsLoadingFailed},getFilterPriceFrom:function(t){return t.filterPriceFrom},getFilterPriceTo:function(t){return t.filterPriceTo},getFilterCategory:function(t){return t.filterCategory},getFilterColors:function(t){return t.filterColors},getFilterSeasons:function(t){return t.filterSeasons},getFilterMaterials:function(t){return t.filterMaterials},getPage:function(t){return t.page},getProductsPerPage:function(t){return t.productsPerPage},getProductsData:function(t){return t.productsData},getCountProducts:function(t){return t.productsData?t.productsData.pagination.total:0},getColors:function(t){return t.colors?t.colors.items:[]},getSeasons:function(t){return t.seasons?t.seasons.items:[]},getProductCategories:function(t){return t.productCategories?t.productCategories.items:[]},getMaterials:function(t){return t.materials?t.materials.items:[]}},Re={setProductsLoading:function(t,e){t.productsLoading=e},setProductsLoadingFailed:function(t,e){t.productsLoadingFailed=e},setFilterPriceFrom:function(t,e){t.filterPriceFrom=e},setFilterPriceTo:function(t,e){t.filterPriceTo=e},setFilterCategory:function(t,e){t.filterCategory=e},setFilterColors:function(t,e){t.filterColors=e},setFilterSeasons:function(t,e){t.filterSeasons=e},setFilterMaterials:function(t,e){t.filterMaterials=e},setPage:function(t,e){t.page=e},setProductsData:function(t,e){t.productsData=e},setProductCategories:function(t,e){t.productCategories=e},setColors:function(t,e){t.colors=e},setMaterials:function(t,e){t.materials=e},setSeasons:function(t,e){t.seasons=e}},Je={loadProducts:function(t){t.commit("setProductsLoading",!0),t.commit("setProductsLoadingFailed",!1),Le.a.get(je+"/api/products",{params:{page:t.state.page,limit:t.state.productsPerPage,categoryId:t.state.filterCategory,minPrice:t.state.filterPriceFrom,maxPrice:t.state.filterPriceTo,colorIds:[],materialIds:t.state.filterMaterials,seasonIds:t.state.filterSeasons}}).then((function(e){return t.commit("setProductsData",e.data)})).catch((function(e){console.log(e),t.commit("setProductsLoadingFailed",!0)})).then((function(){return t.commit("setProductsLoading",!1)}))},loadProductCategories:function(t){t.commit("setProductsLoading",!0),t.commit("setProductsLoadingFailed",!1),Le.a.get(je+"/api/productCategories",{}).then((function(e){return t.commit("setProductCategories",e.data)})).catch((function(e){console.log(e),t.commit("setProductsLoadingFailed",!0)})).then((function(){return t.commit("setProductsLoading",!1)}))},loadColors:function(t){t.commit("setProductsLoading",!0),t.commit("setProductsLoadingFailed",!1),Le.a.get(je+"/api/colors",{}).then((function(e){return t.commit("setColors",e.data)})).catch((function(e){console.log(e),t.commit("setProductsLoadingFailed",!0)})).then((function(){return t.commit("setProductsLoading",!1)}))},loadMaterials:function(t){t.commit("setProductsLoading",!0),t.commit("setProductsLoadingFailed",!1),Le.a.get(je+"/api/materials",{}).then((function(e){return t.commit("setMaterials",e.data)})).catch((function(e){console.log(e),t.commit("setProductsLoadingFailed",!0)})).then((function(){return t.commit("setProductsLoading",!1)}))},loadSeasons:function(t){t.commit("setProductsLoading",!0),t.commit("setProductsLoadingFailed",!1),Le.a.get(je+"/api/seasons",{}).then((function(e){return t.commit("setSeasons",e.data)})).catch((function(e){console.log(e),t.commit("setProductsLoadingFailed",!0)})).then((function(){return t.commit("setProductsLoading",!1)}))}},Ge={namespaced:!0,state:Ue,getters:ze,actions:Je,mutations:Re},He={productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1},Qe={getProductData:function(t){return t.productData},getProductLoading:function(t){return t.productLoading},getProductAddSending:function(t){return t.productAddSending}},We={setProductData:function(t,e){t.productData=e},setProductLoading:function(t,e){t.productLoading=e},setProductLoadingFailed:function(t,e){t.productLoadingFailed=e},setProductAdded:function(t,e){t.productAdded=e},setProductAddSending:function(t,e){t.productAddSending=e}},Xe={loadProduct:function(t,e){var r=this;t.commit("setProductLoading",!0),t.commit("setProductLoadingFailed",!1),Le.a.get(je+"/api/products/"+e).then((function(e){return t.commit("setProductData",e.data)})).catch((function(e){console.log(e),t.commit("setProductLoadingFailed",!0),"404"===e.request.status&&r.$router.replace({name:"notFound",params:{0:"/"}})})).finally((function(){return t.commit("setProductLoading",!1)}))}},Ye={namespaced:!0,state:He,getters:Qe,actions:Xe,mutations:We},Ze={addProductToCart:function(t,e){var r=e.productId,a=e.colorId,o=e.sizeId,s=e.quantity;return Le.a.post(je+"/api/baskets/products",{productId:r,colorId:a,sizeId:o,quantity:s},{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},loadCart:function(t){t.commit("updateLoadingStatus",{loading:!0,error:!1}),Le.a.get(je+"/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts"),t.commit("updateLoadingStatus",{loading:!1,error:!1})})).catch((function(e){console.log(e),t.commit("updateLoadingStatus",{loading:!1,error:!0})}))},updateCartProductAmount:function(t,e){var r=e.basketItemId,a=e.amount;if(!(a<1))return t.commit("updateCartProductAmount",{basketItemId:r,amount:a}),new Promise((function(e,o){Le.a.put(je+"/api/baskets/products",{basketItemId:r,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((function(r){t.commit("updateCartProductsData",r.data.items),e()})).catch((function(e){console.log(e),t.commit("syncCartProducts"),o()}))}))},removeCartProduct:function(t,e){return t.commit("deleteCartProduct",e),new Promise((function(r,a){Le.a.delete(je+"/api/baskets/products",{params:{userAccessKey:t.state.userAccessKey},data:{basketItemId:e}}).then((function(e){t.commit("updateCartProductsData",e.data.items),r()})).catch((function(e){console.log(e),t.commit("syncCartProducts"),a()}))}))},loadOrderInfo:function(t,e){return new Promise((function(r,a){Le.a.get(je+"/api/orders"+e,{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateOrderInfo",e.data),r()})).catch((function(t){console.log(t),a()}))}))}},tr={cartProducts:[],userAccessKey:null,cartProductsData:[],cartLoading:!1,cartLoadingError:!1},er=(r("d81d"),{getCartLoading:function(t){return t.cartLoading},getCartLoadingError:function(t){return t.cartLoadingError},getCartProducts:function(t){return t.cartProducts},getCartItemsProducts:function(t){return t.cartProducts.reduce((function(t,e){return t+e.amount}),0)},cartDetailProducts:function(t){return t.cartProducts.map((function(e){var r=t.cartProductsData.find((function(t){return t.id===e.basketItemId}));return Object(i["a"])(Object(i["a"])({},e),{},{product:Object(i["a"])({},r),positionCost:r.product.price*e.amount})}))},cartTotalPrice:function(t,e){return e.cartDetailProducts.reduce((function(t,e){return t+e.amount*e.product.price}),0)},cartPositionsCount:function(t){return t.cartProducts.length},getUserAccessKey:function(t){return t.userAccessKey||localStorage.getItem("userAccessKey")}}),rr=(r("4de4"),{resetCart:function(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount:function(t,e){var r=e.basketItemId,a=e.amount,o=t.cartProducts.find((function(t){return t.basketItemId===r}));o&&(o.amount=a)},deleteCartProduct:function(t,e){t.cartProducts=t.cartProducts.filter((function(t){return t.basketItemId!==e}))},updateUserAccessKey:function(t,e){t.userAccessKey=e},updateCartProductsData:function(t,e){t.cartProductsData=e},syncCartProducts:function(t){t.cartProducts=t.cartProductsData.map((function(t){return{productId:t.product.id,amount:t.quantity,basketItemId:t.id}}))},updateLoadingStatus:function(t,e){var r=e.loading,a=e.error;t.cartLoading=r,t.cartLoadingError=a}}),ar={namespaced:!0,actions:Ze,state:tr,getters:er,mutations:rr},or={orderInfo:null,deliveryData:null,payments:null},sr={getDeliveryData:function(t){return t.deliveryData},getOrderInfo:function(t){return t.orderInfo},getPayments:function(t){return t.payments},orderProducts:function(t){return t.orderInfo?t.orderInfo.basket.items.map((function(t){return{product:t,positionCost:t.price*t.quantity,productId:t.product.id}})):[]}},ir={updateOrderInfo:function(t,e){t.orderInfo=e},setDeliveryData:function(t,e){t.deliveryData=e},setPayments:function(t,e){t.payments=e}},nr={loadOrderInfo:function(t,e){var r=e.orderId,a=e.userAccessKey;return new Promise((function(e,o){Le.a.get(je+"/api/orders/"+r,{params:{userAccessKey:a}}).then((function(r){t.commit("updateOrderInfo",r.data),e()})).catch((function(t){console.log(t),o()}))}))},loadDeliveryData:function(t){return new Promise((function(e,r){Le.a.get(je+"/api/deliveries").then((function(r){t.commit("setDeliveryData",r.data),e()})).catch((function(e){console.log(e),t.commit("setDeliveryData",null),r()}))}))},loadPayments:function(t){return new Promise((function(e,r){var a=t.state.deliveryData,o=[];a.forEach((function(e){Le.a.get(je+"/api/payments",{params:{deliveryTypeId:e.id}}).then((function(t){return o.push({items:t.data,deliveryTypeId:e.id})})).catch((function(t){console.log(t),o=[],r()})).then((function(){t.commit("setPayments",o)}))})),e()}))}},cr={namespaced:!0,state:or,getters:sr,actions:nr,mutations:ir};a["a"].use(l["a"]);var lr=new l["a"].Store({modules:{catalog:Ge,product:Ye,cart:ar,order:cr}});a["a"].config.productionTip=!1,new a["a"]({router:qe,store:lr,render:function(t){return t(v)}}).$mount("#app")},"704c":function(t,e,r){t.exports=r.p+"img/error.fdf84898.png"},"8aa4":function(t,e,r){"use strict";r("bc15")},"8c07":function(t,e,r){"use strict";r("42f0")},a7be:function(t,e,r){},bc15:function(t,e,r){},e9e7:function(t,e,r){t.exports=r.p+"img/404.9aae8141.gif"},f162:function(t,e,r){"use strict";r("a7be")}});
//# sourceMappingURL=app.c281b4d9.js.map